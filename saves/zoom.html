<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>javascript检测浏览器的缩放状态实现代码 | 静水深流</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="shortcut icon" href="/link.jpg" type="image/jpg">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/link.jpg">
    <link rel="mask-icon" href="/link.jpg" color="#1e90ff">
    <script src="https://hm.baidu.com/hm.js?5ebfc1c23339503a9d4d7fae0f2b1f17" defer="true"></script>
    <meta name="description" content="浏览器的内容可以通过Ctrl和+或—一起使用，来实现页面的缩放，但是有时候这种缩放会导致页面布局的错乱，变形，所以我们需要检测用户的浏览器的缩放状态，以提醒用户恢复页面缩放大小，以实现最好的用户体验">
    <meta name="keywords" content="web前端,前端面试题,HTML5,CSS3,CSS,jQuery,JS,JavaScript,前端,vue,博客,技术文章,静水深流,react,18禁">
    <meta name="author" content="shaolibao">
    <meta name="google-site-verification" content="018PP6ptGKwOerKbKgiOwbvtEvXE4z1MbWL70S53pUg">
    <meta name="baidu-site-verification" content="OLgrXzieBl">
    <meta name="msvalidate.01" content="18F16D4763157255069DFE0F9ADEF271">
    <meta name="theme-color" content="#1e90ff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/link.jpg">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/css/0.styles.f64743fe.css" as="style"><link rel="preload" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/app.13bced86.js" as="script"><link rel="preload" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/2.9b117bd7.js" as="script"><link rel="preload" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/41.365ef3ed.js" as="script"><link rel="preload" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/7.cec8ed10.js" as="script"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/10.226630f0.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/11.c8003f63.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/12.ac4cf352.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/13.cd1f1fcc.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/14.2085905c.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/15.53e18c18.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/16.92fbcd34.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/17.93127adb.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/18.95cac0c1.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/19.458339ce.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/20.147793b4.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/21.40e3febe.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/22.b1991fb6.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/23.4d9f4cde.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/24.042a22e8.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/25.c914c590.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/26.e9a40fd6.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/27.63979a57.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/28.7a647854.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/29.2dce19c2.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/3.11d284de.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/30.8c63f7c8.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/31.52f4cfbe.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/32.175eeca2.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/33.e5f06942.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/34.160d1cdd.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/35.69d5ace4.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/36.a6c566a8.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/37.7f4b1afa.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/38.826c77ca.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/39.3a775476.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/4.30cfb7ec.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/40.4987df68.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/42.7abe9f2f.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/43.2ac49e84.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/5.1a34cdcc.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/6.1fb92812.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/8.511f15c8.js"><link rel="prefetch" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/9.fdd3d3f5.js">
    <link rel="stylesheet" href="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/css/0.styles.f64743fe.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">静水深流</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/list/" class="nav-link">
  文章
</a></div><div class="nav-item"><a href="/space/index.html" class="nav-link">
  空间
</a></div><div class="nav-item"><a href="/links/index.html" class="nav-link">
  分享
</a></div><div class="nav-item"><a href="https://slbyml.github.io/jsLibrary/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  demo
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/slbyml" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/list/" class="nav-link">
  文章
</a></div><div class="nav-item"><a href="/space/index.html" class="nav-link">
  空间
</a></div><div class="nav-item"><a href="/links/index.html" class="nav-link">
  分享
</a></div><div class="nav-item"><a href="https://slbyml.github.io/jsLibrary/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  demo
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/slbyml" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>javascript检测浏览器的缩放状态实现代码</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/saves/zoom.html#javascript检测浏览器的缩放状态实现代码" class="sidebar-link">javascript检测浏览器的缩放状态实现代码</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="javascript检测浏览器的缩放状态实现代码"><a href="#javascript检测浏览器的缩放状态实现代码" class="header-anchor">#</a> javascript检测浏览器的缩放状态实现代码</h2> <p>这里所说的缩放不是指浏览器大小的缩放，而是指浏览器网页内容的百分比缩放（按Ctrl和+号键或者-号键的缩放）。</p> <p>检测这种缩放有很种方法，QQ空间都通过flash来检测浏览器是否处于缩放。这里提供javascript的方法来检测浏览器的缩放。</p> <p>对于 IE6，就直接无视了，因为 IE6 只能对文本进行缩放。
先来说说浏览器提供的标准检测接口，window.devicePixelRatio 是设备上物理像素和设备独立像素的比例，该属性就可以用于检测网页是否被缩放了。在普通的 PC 浏览器上，在默认无缩放的情况下其默认值是 1。目前Firefox、chrome等都得到了很好的支持。</p> <p>好吧，接下来该说说 IE 的处理方法了。IE 提供了 window.screen.deviceXDPI 和 window.screen.logicalXDPI 两个属性，deviceXDPI 就是对应的设备上的物理像素，而 logicalXDPI 就是对应了设备独立像素的比例。估计标准的检测接口也只是基于 IE 这种方法的一种改进。这两个属性在 windows XP+ 以上的系统上的默认值都是 96，因为系统默认的就是 96dpi 。</p> <p>对于以上两种都不支持的浏览器，还可以利用window.outerWidth 和 window.innerWidth 这两个属性。outerWidth 返回的是窗口元素的外部实际宽度，innerWidth 返回的是窗口元素的内部实际宽度，这两个宽度都包含了滚动条在内的宽度。
有了这些属性基本就可以搞定 PC 浏览器上常见的浏览器了。实现代码如下：
detectZoom 函数的返回值如果是 100 就是默认缩放级别，大于 100 则是放大了，小于 100 则是缩小了。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">detectZoom</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
  <span class="token keyword">var</span> ratio <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    screen <span class="token operator">=</span> window<span class="token punctuation">.</span>screen<span class="token punctuation">,</span>
    ua <span class="token operator">=</span> navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
   <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>devicePixelRatio <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ratio <span class="token operator">=</span> window<span class="token punctuation">.</span>devicePixelRatio<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">~</span>ua<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'msie'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token keyword">if</span> <span class="token punctuation">(</span>screen<span class="token punctuation">.</span>deviceXDPI <span class="token operator">&amp;&amp;</span> screen<span class="token punctuation">.</span>logicalXDPI<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ratio <span class="token operator">=</span> screen<span class="token punctuation">.</span>deviceXDPI <span class="token operator">/</span> screen<span class="token punctuation">.</span>logicalXDPI<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>outerWidth <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ratio <span class="token operator">=</span> window<span class="token punctuation">.</span>outerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
   <span class="token keyword">if</span> <span class="token punctuation">(</span>ratio<span class="token punctuation">)</span><span class="token punctuation">{</span>
    ratio <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>ratio <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
   <span class="token keyword">return</span> ratio<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">5/25/2019, 6:12:12 PM</span></div></footer> <!----> </main></div><div class="global-ui"><div class="ff">
  部分内容来源于网络，如有侵权，请留言或联系994917123@qq.com;访问量:<span id="busuanzi_value_site_pv">waiting</span>;访客数:<span id="busuanzi_value_site_uv">waiting</span></div></div></div>
    <script src="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/app.13bced86.js" defer></script><script src="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/2.9b117bd7.js" defer></script><script src="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/41.365ef3ed.js" defer></script><script src="//slbblog.oss-cn-beijing.aliyuncs.com/dist/assets/js/7.cec8ed10.js" defer></script>
  </body>
</html>
